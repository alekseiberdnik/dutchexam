<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Results — DutchExam.online</title><link rel="stylesheet" href="assets/brand.css"/><link rel="stylesheet" href="assets/tests.css"/></head><body><div class="wrap"><div class="topnav"><div class="brand">DutchExam.online</div><div><a href="tests.html">← Back</a></div></div><section class="section"><h2>Your results</h2><p class="muted">Summary across demos you completed on this device.</p><div id="summary" class="card"></div><div id="details" class="card" style="margin-top:12px"></div><div class="cta" style="margin-top:12px"><a class="btn secondary" href="tests.html">Take more tests</a><a class="btn ghost" href="#" id="clear">Clear local results</a></div></section></div><script>
function overallAdvice(map){var keys=Object.keys(map);if(!keys.length)return "No data yet — try a demo.";var avg=0;keys.forEach(function(k){avg+=map[k].acc});avg=Math.round(avg/keys.length);if(avg>=85)return "Likely close to B1 — keep practicing timed tasks.";if(avg>=60)return "Solid A2 — strengthen weaker skills.";return "Build fundamentals — daily short drills.";}
function render(){var arr=JSON.parse(localStorage.getItem('DE_RESULTS')||'[]');var best={};arr.forEach(function(x){var acc=typeof x.acc==='number'?x.acc:Math.round(100*x.score/x.total);if(!best[x.skill]||acc>best[x.skill].acc)best[x.skill]={score:x.score,total:x.total,acc:acc,startedAt:x.startedAt,finishedAt:x.finishedAt};});var summary=document.getElementById('summary');var skills=Object.keys(best);if(!skills.length){summary.innerHTML="<p>No results yet.</p>";return;}var advice=overallAdvice(best);summary.innerHTML="<h3>Overview</h3><p class='muted'>Best accuracy per skill. Advice: "+advice+"</p><table><thead><tr><th>Skill</th><th>Score</th><th>Accuracy</th></tr></thead><tbody>"+skills.map(function(k){return "<tr><td>"+k+"</td><td>"+best[k].score+"/"+best[k].total+"</td><td>"+best[k].acc+"%</td></tr>"}).join('')+"</tbody></table>";var rows=arr.slice(-20).reverse().map(function(x){var a=typeof x.acc==='number'?x.acc:Math.round(100*x.score/x.total);var spent=(x.finishedAt&&x.startedAt)?Math.round((x.finishedAt-x.startedAt)/1000):'-';var when=x.finishedAt?new Date(x.finishedAt).toLocaleString():'';return "<tr><td>"+x.skill+"</td><td>"+x.score+"/"+x.total+"</td><td>"+a+"%</td><td>"+spent+"s</td><td>"+when+"</td></tr>"}).join('');document.getElementById('details').innerHTML="<h3>Recent attempts</h3><table><thead><tr><th>Skill</th><th>Score</th><th>Accuracy</th><th>Time</th><th>When</th></tr></thead><tbody>"+rows+"</tbody></table>";}
document.getElementById('clear').addEventListener('click',function(e){e.preventDefault();localStorage.removeItem('DE_RESULTS');render();});render();
</script>
<script>
(function(){
  function toCSV(rows){
    const esc = v => ('"'+String(v).replace(/"/g,'""')+'"');
    return rows.map(r=>r.map(esc).join(',')).join('\n');
  }
  function downloadCSV(name, content){
    const blob = new Blob([content], {type:'text/csv'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = name; document.body.appendChild(a); a.click();
    setTimeout(()=>{URL.revokeObjectURL(url); a.remove();}, 0);
  }
  const btn = document.getElementById('exportCsv');
  if (btn){
    btn.addEventListener('click', function(e){
      e.preventDefault();
      const arr = JSON.parse(localStorage.getItem('DE_RESULTS') || '[]');
      if (!arr.length){ alert('No results to export yet.'); return; }
      const rows = [['skill','score','total','accuracy','difficulty','startedAt','finishedAt','seconds']];
      arr.forEach(x=>{
        const acc = typeof x.acc==='number' ? x.acc : Math.round(100*x.score/x.total);
        const secs = (x.finishedAt && x.startedAt) ? Math.round((x.finishedAt - x.startedAt)/1000) : '';
        rows.push([x.skill, x.score, x.total, acc, x.difficulty||'', x.startedAt||'', x.finishedAt||'', secs]);
      });
      const csv = toCSV(rows);
      downloadCSV('dutchexam-results.csv', csv);
    });
  }
})();
</script>

</body></html>