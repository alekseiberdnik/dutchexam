<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DutchExam.online — Extended Level Test (~10 min)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f8fafc; --paper:#ffffff; --text:#0f172a; --muted:#475569; --line:#e2e8f0;
    --blue:#2563eb; --blue-2:#3b82f6; --blue-50:#eff6ff;
    --yellow:#f59e0b; --yellow-2:#fde68a; --yellow-50:#fffbeb;
    --ok:#16a34a; --bad:#ef4444;
    --radius:18px; --shadow:0 16px 40px rgba(2,6,23,.08);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
    background:
      radial-gradient(1200px 700px at 8% -10%, #eef2ff 0%, transparent 60%),
      radial-gradient(1200px 700px at 92% 0%, #fff7cc 0%, transparent 60%),
      var(--bg);
  }
  .wrap{max-width:1200px; margin:0 auto; padding:22px 16px 80px}
  .grid{display:grid; grid-template-columns:300px 1fr; gap:18px}
  @media (max-width:980px){ .grid{grid-template-columns:1fr} }

  /* SIDEBAR */
  .side{
    position:sticky; top:16px;
    background:var(--paper); border:1px solid var(--line); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:18px;
  }
  .side h3{margin:6px 0 8px; font-size:1.1rem}
  .pill{display:inline-block; padding:6px 10px; border-radius:999px; font-weight:700; font-size:.9rem}
  .pill-blue{background:var(--blue-50); color:var(--blue); border:1px solid #bfdbfe}
  .pill-yellow{background:var(--yellow-50); color:#8d5c00; border:1px solid #fde68a}
  .kv{display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; margin:8px 0}
  .val{font-weight:800}
  .barwrap{height:10px; background:#eef2f7; border-radius:999px; overflow:hidden; margin:10px 0}
  .bar{height:100%; width:0%; background:linear-gradient(90deg,#34d399,#22c55e); transition:width .25s ease}

  /* MAIN */
  .card{
    background:var(--paper); border:1px solid var(--line); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:22px; margin-bottom:18px;
  }
  h1{font-size: clamp(1.8rem, 1.6rem + 1.8vw, 2.6rem); margin:4px 0 6px; letter-spacing:-.02em}
  p.lead{color:var(--muted); margin:0 0 10px}
  .progress{height:10px; background:#eef2f7; border-radius:999px; overflow:hidden; margin:10px 0 16px}
  .progress .pbar{height:100%; width:0%; background:linear-gradient(90deg, var(--blue-2), var(--blue)); transition:width .25s ease}

  .qtitle{font-weight:800; margin:2px 0 8px}
  .qmeta{color:var(--muted); font-size:.95rem; margin-bottom:6px}

  .input{
    display:flex; align-items:center; gap:10px; padding:12px 14px; border-radius:12px;
    background:#fff; border:1px solid var(--line);
  }
  .input input{flex:1; border:0; outline:0; background:transparent; font-size:1rem; color:var(--text)}
  .opts{display:grid; gap:10px; margin-top:12px}
  .opt{
    border:1px solid var(--line); background:#fff; padding:12px 14px; border-radius:12px; cursor:pointer; text-align:left;
    transition: border-color .15s ease, background .15s ease, transform .08s ease, box-shadow .15s ease;
  }
  .opt:hover{transform:translateY(-1px); border-color:#bfdbfe; box-shadow:0 8px 18px rgba(2,6,23,.06)}
  .opt.correct{outline:2px solid var(--ok); background:#f0fdf4}
  .opt.wrong{outline:2px solid var(--bad); background:#fef2f2}

  .tokens, .slots{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
  .token, .slot{
    user-select:none;
    border:1px dashed #bfdcff; background:var(--blue-50); color:var(--blue);
    padding:8px 10px; border-radius:10px; cursor:pointer; min-width:44px; text-align:center; font-weight:700;
  }
  .slot{ background:#fff; border:1px dashed #94a3b8; color:#64748b }
  .slot.filled{border-style:solid}
  .token.dragging{opacity:.6}

  select.select{
    padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; font-weight:600
  }
  .textblock{background:#fff; border:1px solid var(--line); border-radius:12px; padding:12px}

  .btns{display:flex; gap:12px; flex-wrap:wrap; margin-top:14px}
  .btn{
    appearance:none; border:0; border-radius:12px; cursor:pointer; padding:12px 16px; font-weight:800;
    transition: transform .16s ease, box-shadow .2s ease, filter .2s ease;
  }
  .btn:hover{transform:translateY(-2px)}
  .primary{color:#fff; background:linear-gradient(180deg,var(--blue-2),var(--blue)); box-shadow:0 10px 24px rgba(37,99,235,.22)}
  .secondary{background:linear-gradient(180deg,var(--yellow-2),var(--yellow)); color:#0f172a; box-shadow:0 10px 24px rgba(245,158,11,.22)}
  .ghost{background:#fff; border:1px solid var(--line); color:#0f172a}
  .status{font-weight:700; margin-top:6px}
  .ok{color:var(--ok)} .bad{color:var(--bad)}
  .muted{color:var(--muted)}

  .result{display:none}
  .center{text-align:center}

  .topnav{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px}
  .brand{font-weight:800}
  .topnav a{color:var(--blue); text-decoration:none; font-weight:700}
</style>

  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml"/>
  <meta property="og:title" content="DutchExam.online — Inburgering Prep"/>
  <meta property="og:description" content="Prepare for the Dutch inburgering exam with DutchExam.online"/>
  <meta property="og:image" content="assets/og-preview.svg"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://dutchexam.online"/>
    
</head>
<body>
  <div class="wrap">
    <div class="topnav">
      <div class="brand">DutchExam.online</div>
      <div><a href="index.html">← Back</a> • <a href="tests.html">All tests</a></div>
    </div>

    <div class="grid">
      <!-- SIDEBAR -->
      <aside class="side" id="sidebar">
        <h3>Текущий уровень</h3>
        <div id="levelBadge" class="pill pill-blue">—</div>

        <div class="kv">
          <div>Точность</div>
          <div class="val"><span id="accVal">—</span></div>
        </div>
        <div class="barwrap"><div id="accBar" class="bar" style="width:0%"></div></div>

        <div class="kv">
          <div>Баллов</div>
          <div class="val"><span id="pointsVal">0</span></div>
        </div>

        <div class="kv">
          <div>Вопрос</div>
          <div class="val"><span id="qpos">1</span>/<span id="qtotal">15</span></div>
        </div>

        <div class="pill pill-blue" style="margin-top:10px">Extended ~10 min</div>
        <p class="muted" style="margin-top:10px">Complete, choose, drag-and-drop, or select from dropdowns. Includes a short reading task.</p>
      </aside>

      <!-- MAIN -->
      <main>
        <section class="card">
          <h1 data-i18n="title">Extended Dutch level test</h1>
          <p class="lead">A balanced check across reading, grammar, and everyday situations. We’ll estimate your level as you go.</p>
          <div class="progress"><div id="pbar" class="pbar"></div></div>
          <div class="qmeta" id="qmeta"></div>
          <div class="qtitle" id="qtitle"></div>

          <!-- dynamic question host -->
          <div id="qhost"></div>

          <div class="status" id="status"></div>

          <div class="btns">
            <button id="checkBtn" class="btn primary">Check</button>
            <button id="nextBtn" class="btn ghost" disabled>Next</button>
            <button id="skipBtn" class="btn ghost">Skip</button>
            <button id="restartBtn" class="btn secondary" style="margin-left:auto">Restart</button>
          </div>
        </section>

        <!-- RESULT -->
        <section class="card result" id="resultCard">
          <h2 class="center">Your extended test result</h2>
          <p class="center"><strong>Score:</strong> <span id="finalPoints">0</span> / <span id="finalTotal">0</span> •
            <strong>Accuracy:</strong> <span id="finalAcc">0%</span></p>
          <p class="center"><strong>Estimated level:</strong> <span id="finalLevel">—</span></p>
          <div class="center btns" style="justify-content:center">
            <a class="btn primary" href="tests.html">Choose another test</a>
            <button class="btn ghost" id="againBtn">Retake this test</button>
          </div>
        </section>
      </main>
    </div>
  </div>

<script>
/** ====== DATA ====== */
const QUESTIONS = [
  // 1 input
  { type:'input', prompt:'Vul in: Ik ___ Nederlands aan het leren.', answer:['ben'], help:'Ik ben aan het leren (continuous).' },
  // 2 mc
  { type:'mc', prompt:'Kies het juiste woord: Ik ___ naar het werk met de fiets.', options:['ga','gaat','gingt'], correctIndex:0, help:'“Ik ga”.' },
  // 3 input
  { type:'input', prompt:'Complete: Wij ___ morgen vroeg op.', answer:['staan'], help:'Wij staan (op).' },
  // 4 mc
  { type:'mc', prompt:'Welke zin is correct?', options:['Ik heb een afspraak om 9 uur.','Ik heb een afspraak te 9 uur.','Ik heb een afspraak naar 9 uur.'], correctIndex:0, help:'“afspraak om 9 uur”.' },
  // 5 dnd (order)
  { type:'dnd', prompt:'Zet de woorden in de juiste volgorde:', words:['Ik','wil','graag','met','pin','betalen.'] },
  // 6 input
  { type:'input', prompt:'Vul in: Kunt u mij ___, alstublieft?', answer:['helpen'], help:'Na “kunt u mij” → infinitief: helpen.' },
  // 7 mc polite form
  { type:'mc', prompt:'Wat zegt u in een winkel?', options:['Geef tas.','Mag ik een tas, alstublieft?','Ik wil tas nu.'], correctIndex:1, help:'Beleefde vraag: “Mag ik …, alstublieft?”' },
  // 8 dropdown (select)
  { type:'select', prompt:'Kies de juiste vorm: Hij ___ vandaag niet.', options:['werk','werkt','werken'], correctIndex:1, help:'Hij werkt (3e persoon -t).' },
  // 9 reading + mc
  { type:'reading',
    text:'De bibliotheek is open van maandag tot en met vrijdag van 9:00 tot 18:00. Op zaterdag is de bibliotheek open van 10:00 tot 16:00. Op zondag is zij gesloten.',
    question:'Wanneer is de bibliotheek gesloten?',
    options:['Op zaterdag','Op zondag','Nooit'],
    correctIndex:1
  },
  // 10 input
  { type:'input', prompt:'Vul in: Mijn broer ___ in Den Haag.', answer:['woont'], help:'3e persoon: hij/zij woont.' },
  // 11 dnd question
  { type:'dnd', prompt:'Maak de vraag:', words:['Waar','is','het','station?'] },
  // 12 mc past/simple
  { type:'mc', prompt:'Welke zin is correct in de verleden tijd?', options:['Gisteren ik ga naar school.','Gisteren ging ik naar school.','Gisteren gaan ik naar school.'], correctIndex:1 },
  // 13 select article
  { type:'select', prompt:'Kies het juiste lidwoord: ___ afspraak', options:['De','Het','Een'], correctIndex:2, help:'“een afspraak”. (Onbepaald lidwoord)'},
  // 14 input separable verb
  { type:'input', prompt:'Vul in: Ik ___ de deur ___ (opendoen).', answer:['doe open','open doe'], help:'Separable verb: “Ik doe de deur open.”' },
  // 15 mc situation
  { type:'mc', prompt:'U bent ziek en belt de huisarts. Wat zegt u?', options:['Ik ben ziek, kan ik een afspraak maken?','Ik kom morgen zonder te bellen.','Ik ga naar de tandarts.'], correctIndex:0 }
];

const TOTAL = QUESTIONS.length;

/** ====== STATE ====== */
let idx = 0;
let correct = 0;
let attempted = 0;
let checked = false;
let dndState = null;

/** ====== DOM ====== */
const qmeta = document.getElementById('qmeta');
const qtitle = document.getElementById('qtitle');
const qhost = document.getElementById('qhost');
const statusEl = document.getElementById('status');
const checkBtn = document.getElementById('checkBtn');
const nextBtn = document.getElementById('nextBtn');
const skipBtn = document.getElementById('skipBtn');
const restartBtn = document.getElementById('restartBtn');
const resultCard = document.getElementById('resultCard');
const pbar = document.getElementById('pbar');

/** Sidebar */
const accVal = document.getElementById('accVal');
const accBar = document.getElementById('accBar');
const pointsVal = document.getElementById('pointsVal');
const qpos = document.getElementById('qpos');
const qtotal = document.getElementById('qtotal');
const levelBadge = document.getElementById('levelBadge');
qtotal.textContent = TOTAL;

/** Final */
const finalPoints = document.getElementById('finalPoints');
const finalTotal = document.getElementById('finalTotal');
const finalAcc = document.getElementById('finalAcc');
const finalLevel = document.getElementById('finalLevel');
const againBtn = document.getElementById('againBtn');

/** ====== RENDER ====== */
function render() {
  resultCard.style.display = 'none';
  qhost.innerHTML = '';
  statusEl.textContent = '';
  statusEl.className = 'status';
  checked = false;

  const q = QUESTIONS[idx];
  qmeta.textContent = `Question ${idx+1} of ${TOTAL}`;
  qtitle.innerHTML = q.prompt || '';

  // progress
  pbar.style.width = `${(idx)/TOTAL*100}%`;
  qpos.textContent = idx+1;

  if (q.type === 'input') {
    const box = document.createElement('div');
    box.className = 'input';
    box.innerHTML = `<input id="answerInput" type="text" placeholder="Type your answer…" autocomplete="off">`;
    qhost.appendChild(box);
    if (q.help) addHelp(q.help);
  }
  else if (q.type === 'mc') {
    const opts = document.createElement('div');
    opts.className = 'opts';
    q.options.forEach((optText, i) => {
      const b = document.createElement('button');
      b.type = 'button';
      b.className = 'opt';
      b.textContent = optText;
      b.addEventListener('click', () => {
        if (checked) return;
        document.querySelectorAll('.opt').forEach(o => o.dataset.sel = '0');
        b.dataset.sel = '1';
        document.querySelectorAll('.opt').forEach(o => o.style.outline = '');
        b.style.outline = '2px solid #bfdbfe';
      });
      opts.appendChild(b);
    });
    qhost.appendChild(opts);
    if (q.help) addHelp(q.help);
  }
  else if (q.type === 'dnd') {
    dndState = { slots: [], pool: null };
    const instr = document.createElement('div');
    instr.className = 'muted';
    instr.textContent = 'Drag or click words into the blanks in correct order.';
    qhost.appendChild(instr);

    const slots = document.createElement('div');
    slots.className = 'slots';
    q.words.forEach(() => {
      const s = document.createElement('button');
      s.type = 'button';
      s.className = 'slot';
      s.addEventListener('click', () => {
        if (s.textContent.trim() !== '') {
          const token = createToken(s.textContent);
          pool.appendChild(token);
          s.textContent = '';
          s.classList.remove('filled');
        }
      });
      slots.appendChild(s);
      dndState.slots.push(s);
    });
    qhost.appendChild(slots);

    const pool = document.createElement('div');
    pool.className = 'tokens';
    const shuffled = [...q.words].sort(() => Math.random()-0.5);
    shuffled.forEach(w => pool.appendChild(createToken(w)));
    qhost.appendChild(pool);
    dndState.pool = pool;

    dndState.slots.forEach(s => {
      s.addEventListener('dragover', (e) => e.preventDefault());
      s.addEventListener('drop', (e) => {
        e.preventDefault();
        const drag = document.querySelector('.token.dragging');
        if (!drag) return;
        if (s.textContent.trim() === ''){
          s.textContent = drag.textContent;
          s.classList.add('filled');
          drag.remove();
        }
      });
    });

    function createToken(text){
      const t = document.createElement('button');
      t.type = 'button';
      t.className = 'token';
      t.textContent = text;
      t.addEventListener('click', () => {
        const slot = dndState.slots.find(s => s.textContent.trim() === '');
        if (slot){
          slot.textContent = text;
          slot.classList.add('filled');
          t.remove();
        }
      });
      t.draggable = true;
      t.addEventListener('dragstart', () => t.classList.add('dragging'));
      t.addEventListener('dragend', () => t.classList.remove('dragging'));
      return t;
    }
  }
  else if (q.type === 'select') {
    const sel = document.createElement('select');
    sel.className = 'select';
    sel.id = 'answerSelect';
    sel.innerHTML = `<option value="">— choose —</option>` + q.options.map((o,i)=>`<option value="${i}">${o}</option>`).join('');
    qhost.appendChild(sel);
    if (q.help) addHelp(q.help);
  }
  else if (q.type === 'reading') {
    const tb = document.createElement('div');
    tb.className = 'textblock';
    tb.textContent = q.text;
    qhost.appendChild(tb);

    const qh = document.createElement('div');
    qh.className = 'qtitle';
    qh.style.marginTop = '10px';
    qh.textContent = q.question;
    qhost.appendChild(qh);

    const opts = document.createElement('div');
    opts.className = 'opts';
    q.options.forEach((optText, i) => {
      const b = document.createElement('button');
      b.type = 'button';
      b.className = 'opt';
      b.textContent = optText;
      b.addEventListener('click', () => {
        if (checked) return;
        document.querySelectorAll('.opt').forEach(o => o.dataset.sel = '0');
        b.dataset.sel = '1';
        document.querySelectorAll('.opt').forEach(o => o.style.outline = '');
        b.style.outline = '2px solid #bfdbfe';
      });
      opts.appendChild(b);
    });
    qhost.appendChild(opts);
  }

  nextBtn.disabled = true;

  function addHelp(text){
    const help = document.createElement('div');
    help.className = 'muted';
    help.style.marginTop = '8px';
    help.textContent = 'Tip: ' + text;
    qhost.appendChild(help);
  }
}

/** ====== CHECK / SCORE ====== */
function normalize(s){ return s.trim().toLowerCase().replace(/\s+/g,' '); }

function checkCurrent() {
  if (checked) return;
  const q = QUESTIONS[idx];
  let isCorrect = false;

  if (q.type === 'input') {
    const el = document.getElementById('answerInput');
    const v = (el && el.value) ? el.value : '';
    if (!v.trim()){ return showStatus('Type your answer first.'); }
    isCorrect = q.answer.map(a => normalize(a)).includes(normalize(v));
  }
  else if (q.type === 'mc' || q.type === 'reading') {
    const opts = Array.from(document.querySelectorAll('.opt'));
    const selIndex = opts.findIndex(o => o.dataset.sel === '1');
    if (selIndex === -1){ return showStatus('Choose an option first.'); }
    isCorrect = (selIndex === q.correctIndex);
    opts.forEach((o,i) => {
      if (i === q.correctIndex) o.classList.add('correct');
      if (i === selIndex && !isCorrect) o.classList.add('wrong');
      o.disabled = true;
    });
  }
  else if (q.type === 'dnd') {
    const filled = dndState.slots.every(s => s.textContent.trim() !== '');
    if (!filled){ return showStatus('Fill all blanks first.'); }
    const current = dndState.slots.map(s => s.textContent);
    isCorrect = current.join(' ') === QUESTIONS[idx].words.join(' ');
    dndState.slots.forEach((s,i) => {
      const ok = s.textContent === QUESTIONS[idx].words[i];
      s.style.outline = ok ? '2px solid #16a34a' : '2px solid #ef4444';
    });
  }
  else if (q.type === 'select') {
    const sel = document.getElementById('answerSelect');
    if (!sel || sel.value === ''){ return showStatus('Choose an option first.'); }
    isCorrect = Number(sel.value) === q.correctIndex;
    if (!isCorrect) sel.style.borderColor = '#ef4444'; else sel.style.borderColor = '#16a34a';
  }

  attempted++;
  if (isCorrect) {
    correct++;
    statusEl.textContent = 'Correct!';
    statusEl.className = 'status ok';
  } else {
    statusEl.textContent = 'Not quite.' + (q.help ? ' ' + q.help : '');
    statusEl.className = 'status bad';
  }
  checked = true;
  nextBtn.disabled = false;
  updateMeters();
}

function showStatus(msg){ statusEl.textContent = msg; statusEl.className = 'status'; }

/** ====== METERS & LEVEL ====== */
function updateMeters(){
  const acc = attempted ? Math.round((correct/attempted)*100) : 0;
  document.getElementById('accVal').textContent = attempted ? acc + '%' : '—';
  document.getElementById('accBar').style.width = attempted ? acc + '%' : '0%';
  document.getElementById('pointsVal').textContent = String(correct);

  const lvl = estimateLevel(acc, attempted);
  const badge = document.getElementById('levelBadge');
  badge.textContent = lvl;
  badge.className = 'pill ' + (lvl.startsWith('A') ? 'pill-blue' : 'pill-yellow');
}

function estimateLevel(acc, attempts){
  if (attempts < 4) return '—';
  if (acc < 35) return 'A1 Beginner';
  if (acc < 65) return 'A2 Pre-Intermediate';
  if (acc < 85) return 'B1 Intermediate';
  return 'B2 Upper-Intermediate';
}

/** ====== NAV ====== */
function nextQuestion(){
  if (!checked) return;
  if (idx < TOTAL - 1){
    idx++; render();
  } else {
    finish();
  }
}
function skipQuestion(){
  if (!checked) { attempted++; }
  checked = true; nextQuestion();
}
function restart(){
  idx = 0; correct = 0; attempted = 0; checked = false;
  document.getElementById('resultCard').style.display = 'none';
  updateMeters(); render();
}
function finish(){
  document.getElementById('pbar').style.width = '100%';
  document.getElementById('finalPoints').textContent = correct;
  document.getElementById('finalTotal').textContent = TOTAL;
  const acc = attempted ? Math.round((correct/attempted)*100) : 0;
  document.getElementById('finalAcc').textContent = acc + '%';
  document.getElementById('finalLevel').textContent = estimateLevel(acc, attempted);
  document.getElementById('resultCard').style.display = 'block';
  document.getElementById('resultCard').scrollIntoView({behavior:'smooth', block:'center'});
}

/** ====== WIRE ====== */
document.getElementById('checkBtn').addEventListener('click', checkCurrent);
document.getElementById('nextBtn').addEventListener('click', nextQuestion);
document.getElementById('skipBtn').addEventListener('click', skipQuestion);
document.getElementById('restartBtn').addEventListener('click', restart);
document.getElementById('againBtn').addEventListener('click', restart);

/** init */
updateMeters();
render();
</script>

<!-- Google Analytics placeholder -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>

</body>
</html>
